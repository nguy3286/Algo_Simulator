<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo Simulator</title>
    <style>
        .grid-container {
          display: grid;
          grid-template-columns: repeat(35, auto);
          background-color: #2196F3;
          padding: 5px;
        }
        .grid-item {
          background-color: rgba(255, 255, 255, 0.8);
          border: 1px solid rgba(0, 0, 0, 0.8);
          padding: 6px;
          font-size: 18px;
          text-align: center;
        }
    </style>
</head>
<body>
    <div class="grid-container"></div><br>
    <label for="input_arr">nums = </label>
    <input type="text" id="input_arr" placeholder="[2,7,11,15]"><br>
    <label for="input_arr">target = </label>
    <input type="text" id="input_target" placeholder="9"><br>
    <button onclick="init_array()">Run</button><br>

    <pre class="brush: java">public static void main(String args[]) {
        System.out.println("Hello World!");
    }
    </pre>
    <!-- SyntaxHighlighter -->
    <link href='http://alexgorbatchev.com/pub/sh/current/styles/shCore.css' rel='stylesheet' type='text/css'/>
    <link href='http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/>
    <script src='http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js' type='text/javascript'></script>
    <script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js' type='text/javascript'></script>
    <script language='javascript' type='text/javascript'>
        SyntaxHighlighter.all();
    </script>

<script>
    var grid_div = document.getElementsByClassName("grid-container")[0];
    var newDiv = null;

    function init_array()
    {   
        grid_div.innerHTML = "";    // empty div of last inputted array
        var input_target = document.getElementById("input_target").value;
        var input_arr = document.getElementById("input_arr").value;
        if ((input_arr == "") || (input_target == "")) return null; // checking that user input is valid

        input_target = parseInt(input_target);
        input_arr = input_arr.replace(/\s/g, '').slice(1, -1).split(',').map(x=>+x);   // get rid of empty string, delete '[' and ']', split on comma, and convert '2' to 2
        input_arr.sort(function(a, b) {
            return a - b;
        });
        var N = input_arr.length;
        
        for (var i=0; i < N; i++)
        {
            newDiv = document.createElement('div');
            newDiv.className = 'grid-item';
            newDiv.id = i;
            newDiv.innerText = input_arr[i];
            grid_div.appendChild(newDiv);  
        }
        var res = twoSum(input_arr, input_target, N);
        console.log(res);
    }

    async function twoSum(A, target, N)
    {
        var curr_sum, l = 0, r = N-1, l_color = "rgb(126, 11, 11)", r_color = "rgb(16, 128, 62)";
        document.getElementById(l).style.backgroundColor = l_color;
        document.getElementById(r).style.backgroundColor = r_color;

        while (l < r)
        {
            await sleep(2000);
            curr_sum = A[l] + A[r];
            if (curr_sum == target) return [A[l], A[r]];
            else if (curr_sum < target){
                if (l+1 < N) move_ptr(l, l+1, "rgb(126, 11, 11)");
                l++;
            }
            else {
                if (r-1 >= 0) move_ptr(r, r-1, "rgb(16, 128, 62)");
                r--;
            }
        }
    }

    function move_ptr(old_idx, new_idx, color)
    {
        document.getElementById(old_idx).style.backgroundColor = "rgb(255, 255, 255, 0.8)";
        document.getElementById(new_idx).style.backgroundColor = color;
    }
    
    function sleep(ms)
    {
      return new Promise(resolve => setTimeout(resolve, ms));
    }
</script>

</body>
</html>